{% load static %}
<div class="flex w-full p-2 bg-white my-1 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200">
    <div class="flex flex-col lg:flex-row w-full justify-between items-center">
        <div class="flex w-full lg:w-auto justify-start p-3">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M21 17V8H7v9zm0-14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h1V1h2v2h8V1h2v2zM3 21h14v2H3a2 2 0 0 1-2-2V9h2zm16-6h-4v-4h4z"/></svg>
        </div>

        <div class="flex flex-col w-full justify-start items-start px-3">
            <p class="text-sm font-bold text-gray-700 truncate uppercase">
                Vehículo: {{ bitacora.vehiculo.placa }}
            </p>

            <div class="flex flex-col gap-1 text-xs text-gray-500 truncate">
                <div class="flex gap-2">
                    <strong>Chofer:</strong>
                    {{ bitacora.chofer.get_full_name|default:"Sin asignar" }}
                </div>
                <div class="flex gap-2">
                    <strong>Fecha:</strong> {{ bitacora.fecha|date:"d/m/Y" }}
                </div>
                <div class="flex gap-2">
                    <strong>Observaciones:</strong> {{ bitacora.observaciones|default:"Ninguna" }}
                </div>
            </div>
        </div>

        <!-- Fechas y acciones -->
        <div class="flex gap-2 w-full px-3 justify-between items-center">
            <div class="flex flex-col  lg:flex-row lg:gap-3 w-full justify-between items-start lg:items-center py-3">
                <div class="flex flex-col gap-1 px-3 py-2 text-gray-500 w-full" style="font-size: 10px;">
                    <strong>Kilometraje inicial:</strong> {{ bitacora.km_inicial }} km
                </div>
                <div class="flex flex-col gap-1 px-3 py-2 text-gray-500 w-full" style="font-size: 10px;">
                    <strong>Kilometraje final:</strong> {{ bitacora.km_final }} km
                </div>
                <div class="flex flex-col gap-1 px-3 py-2 text-gray-500 w-full" style="font-size: 10px;">
                    <strong>Distancia recorrida:</strong> {{ bitacora.distancia_recorrida }} km
                </div>
                <div class="flex flex-col gap-1 px-3 py-2 text-gray-500 w-full" style="font-size: 10px;">
                    <strong>Combustible cargado:</strong> {{ bitacora.combustible_cargado }} L
                </div>
                <div class="flex flex-col gap-1 px-3 py-2 text-gray-500 w-full" style="font-size: 10px;">
                    <strong>Creado:</strong> {{ bitacora.fecha_registro|date:"d/m/Y H:i" }}
                </div>
                <div class="flex flex-col gap-1 px-3 py-2 text-gray-500 w-full" style="font-size: 10px;">
                    <strong>Actualizado:</strong> {{ bitacora.fecha_actualizacion|date:"d/m/Y H:i" }}
                </div>
            </div>

            <div class="flex py-1 w-full gap-2 justify-end items-end text-base font-semibold text-gray-900">
                {% if user.rol == 'Administrador general' %}
                    <a href="{% url 'imprimir_bitacora' bitacora.id_bitacora %}"
                    target="_blank"
                    class="text-gray-600 rounded-full bg-slate-200 hover:text-slate-700 p-1 text-sm flex items-center"
                    title="Imprimir Bitácora">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M15 15H9v-1h6zm0 1H9v1h6zm0 2H9v1h6zm8-4.5c0 1.25-.44 2.31-1.31 3.19c-.88.87-1.94 1.31-3.19 1.31H18v4H6v-4.05c-1.3-.1-2.43-.59-3.39-1.52C1.54 15.38 1 14.09 1 12.58q0-1.95 1.17-3.48C3.34 7.57 4 7.43 5.25 7.15c.42-1.53 1.25-2.77 2.5-3.72S10.42 2 12 2c1.95 0 3.6.68 4.96 2.04S19 7.05 19 9c1.15.13 2.1.63 2.86 1.5q1.14 1.275 1.14 3M6 15.95V11h11V9c0-1.38-.5-2.56-1.46-3.54C14.56 4.5 13.38 4 12 4s-2.56.5-3.54 1.46C7.5 6.44 7 7.62 7 9h-.5c-.97 0-1.79.34-2.47 1.03c-.69.68-1.03 1.5-1.03 2.47s.34 1.79 1.03 2.5c.56.54 1.22.85 1.97.95M16 13H8v7h8zm5 .5c0-.7-.24-1.29-.73-1.77S19.2 11 18.5 11H18v5h.5q1.05 0 1.77-.72c.72-.72.73-1.08.73-1.78"/></svg>
                    </a>

                    {% include 'admin/bitacoras/btn_eliminar_registro.html' with bitacora=bitacora %}
                {% endif %}
            </div>
        </div>
    </div>
</div>
